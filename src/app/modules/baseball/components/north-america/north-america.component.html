<div class="scoreboard-shell" [class.compact-density]="isCompactDensity">
  <div class="mini-filter-bar" [class.is-visible]="miniFilterVisible">
    <div class="mini-filter-inner">
      <label class="mini-filter-item">
        <span class="mini-filter-label">Date</span>
        <input
          type="date"
          class="mini-filter-date"
          [value]="getMiniDateInputValue()"
          (change)="onMiniDateInputChange($event)"
        />
      </label>

      <label class="mini-filter-item mini-live-toggle" for="miniLiveOnlyToggle">
        <input
          id="miniLiveOnlyToggle"
          type="checkbox"
          [checked]="liveOnlyIsChecked"
          (change)="onMiniLiveOnlyToggle($event)"
        />
        <span>Live only</span>
      </label>

      <button type="button" class="mini-reset-btn" (click)="resetFilters()">
        Reset filters
      </button>
    </div>
  </div>

  <header class="scoreboard-header">
    <h1>Every Baseball Score</h1>
    <p>Live updates every 30 seconds for every game across MLB and the minors. Click a game to see its box score.</p>
  </header>

  <section class="scoreboard-controls">
    <form [formGroup]="form" class="datepicker-center">
      <mat-form-field appearance="fill">
        <mat-label>Choose a date</mat-label>
        <input
          formControlName="dateToCall"
          (dateChange)="handleDateChange()"
          matInput
          [matDatepicker]="picker"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </form>

    <div class="organization-filter-select">
      <label class="filter-label" for="orgFilter">Filter by organization:</label>
      <select id="orgFilter" (change)="addOrgFilter($event)">
        <option value="">Show all scores</option>
        <option value="ARI">Arizona Diamondbacks</option>
        <option value="ATL">Atlanta Braves</option>
        <option value="BAL">Baltimore Orioles</option>
        <option value="BOS">Boston Red Sox</option>
        <option value="CHW">Chicago White Sox</option>
        <option value="CHC">Chicago Cubs</option>
        <option value="CIN">Cincinnati Reds</option>
        <option value="CLE">Cleveland Guardians</option>
        <option value="COL">Colorado Rockies</option>
        <option value="DET">Detroit Tigers</option>
        <option value="HOU">Houston Astros</option>
        <option value="KC">Kansas City Royals</option>
        <option value="LAA">Los Angeles Angels</option>
        <option value="LAD">Los Angeles Dodgers</option>
        <option value="MIA">Miami Marlins</option>
        <option value="MIL">Milwaukee Brewers</option>
        <option value="MIN">Minnesota Twins</option>
        <option value="NYY">New York Yankees</option>
        <option value="NYM">New York Mets</option>
        <option value="PHI">Philadelphia Phillies</option>
        <option value="PIT">Pittsburgh Pirates</option>
        <option value="SAC">Sacramento Athletics</option>
        <option value="SD">San Diego Padres</option>
        <option value="SF">San Francisco Giants</option>
        <option value="SEA">Seattle Mariners</option>
        <option value="STL">St. Louis Cardinals</option>
        <option value="TB">Tampa Bay Rays</option>
        <option value="TEX">Texas Rangers</option>
        <option value="TOR">Toronto Blue Jays</option>
        <option value="WAS">Washington Nationals</option>
      </select>
    </div>

    <div class="favorite-help" role="note" *ngIf="showFavoriteHelp">
      <div class="favorite-help-text">
        <span class="favorite-help-star">‚òÜ</span>
        Click the star next to any team name to favorite it.
        Favorited teams show
        <span class="favorite-help-star favorite-help-star-active">‚òÖ</span>
        and games featuring them are pinned to the top.
      </div>
      <button
        class="favorite-help-dismiss"
        type="button"
        (click)="dismissFavoriteHelp()"
        aria-label="Dismiss favorites help"
      >
        Got it
      </button>
    </div>

    <div class="favorite-chip-row" *ngIf="favoriteTeamIds.length > 0">
      <button
        class="favorite-chip"
        type="button"
        *ngFor="let teamId of favoriteTeamIds"
        (click)="removeFavoriteTeam(teamId)"
      >
        {{ getFavoriteTeamLabel(teamId) }} √ó
      </button>
    </div>

    <div class="organization-filter-select favorite-note" *ngIf="favoriteTeamIds.length > 0">
      Click a highlighted star again to remove a team from favorites.
    </div>

    <div class="organization-filter-select reorder-note">
      Grab the blue <b>Drag</b> handle on each card to reorder (or use ‚Üë/‚Üì buttons). Your order is saved for the day and will expire at 10:00 AM Eastern tomorrow.
    </div>

    <div class="organization-filter-select alerts-toggle-row">
      <mat-slide-toggle
        [(ngModel)]="showPitchingFeatAlerts"
        (change)="onPitchingFeatAlertsToggle()"
      >
        Show no-hitter/perfect game alerts
      </mat-slide-toggle>
    </div>

    <div class="organization-filter-select density-toggle-row">
      <mat-slide-toggle
        [(ngModel)]="isCompactDensity"
        (change)="onCompactDensityToggle()"
      >
        Compact density
      </mat-slide-toggle>
    </div>

    <div class="organization-filter-select sort-chip-row">
      <button
        type="button"
        class="sort-chip"
        *ngFor="let mode of sortModeOptions"
        [class.sort-chip-active]="isActiveSortMode(mode.value)"
        (click)="setSortMode(mode.value)"
      >
        {{ mode.label }}
      </button>
    </div>

    <div class="organization-filter-select sort-note" *ngIf="geoSortNotice">
      {{ geoSortNotice }}
    </div>

    <div class="organization-filter-select toggles-row">
  <mat-slide-toggle
    #mlbToggle
    [(ngModel)]="mlbIsChecked"
    (change)="onSliderChange()"
    >MLB</mat-slide-toggle
  >
  <mat-slide-toggle
    #aaaToggle
    [(ngModel)]="aaaIsChecked"
    (change)="onSliderChange()"
    >Triple A</mat-slide-toggle
  >
  <mat-slide-toggle
    #aaToggle
    [(ngModel)]="aaIsChecked"
    (change)="onSliderChange()"
    >Double A</mat-slide-toggle
  >
  <mat-slide-toggle
    #highAToggle
    [(ngModel)]="highAIsChecked"
    (change)="onSliderChange()"
    >High A</mat-slide-toggle
  >
  <mat-slide-toggle
    #lowAToggle
    [(ngModel)]="lowAIsChecked"
    (change)="onSliderChange()"
    >Low A</mat-slide-toggle
  >
  <mat-slide-toggle
    #liveOnlyToggle
    [(ngModel)]="liveOnlyIsChecked"
    (change)="onSliderChange()"
    >Live Games Only</mat-slide-toggle
  >
  <mat-slide-toggle
    #sortByTimeToggle
    [(ngModel)]="sortByStartTimeIsChecked"
    (change)="onSliderChange()"
    >Sort by Scheduled Start Time</mat-slide-toggle
  >
    </div>
  </section>

<ng-container>
  <div
    *ngIf="everyGame"
    class="desktop-container"
    cdkDropList
    [cdkDropListData]="everyGame.dates[0].games"
    (cdkDropListDropped)="onGameCardDrop($event)"
  >
    <div
      class="desktop"
      cdkDrag
      *ngFor="let game of everyGame.dates[0].games; let i = index"
    >
      <div class="card-reorder-controls" (click)="$event.stopPropagation()">
        <button
          type="button"
          class="reorder-btn drag-handle"
          cdkDragHandle
          title="Drag to reorder"
          aria-label="Drag to reorder card"
        >
          <span class="drag-dots" aria-hidden="true">‚ãÆ‚ãÆ</span>
          <span class="drag-label">Drag</span>
        </button>
        <button
          type="button"
          class="reorder-btn"
          (click)="moveGameCard(i, -1, $event)"
          [disabled]="!canMoveGameCard(i, -1)"
          title="Move card up"
          aria-label="Move card up"
        >
          ‚Üë
        </button>
        <button
          type="button"
          class="reorder-btn"
          (click)="moveGameCard(i, 1, $event)"
          [disabled]="!canMoveGameCard(i, 1)"
          title="Move card down"
          aria-label="Move card down"
        >
          ‚Üì
        </button>
      </div>
      <a
        class="no-text-decoration"
        [routerLink]="['/boxscore', game.gamePk]"
        href=""
        target="_blank"
      >
        <mat-card class="game-card">
          <mat-card-subtitle class="card-subtitle">
            <div
              *ngIf="
                game.teams.away.team.sport.name === 'Major League Baseball'
              "
              class="level-and-gameday"
            >
              <span class="level"
                ><b>{{ game.teams.away.team.sport.name }}</b></span
              ><span class="gameday-link"
                ><a
                  href="http://mlb.com/gameday/{{ game.gamePk }}"
                  target="_blank"
                  >MLB.com Gameday</a
                ></span
              >
            </div>
            <div
              *ngIf="
                game.teams.away.team.sport.name !== 'Major League Baseball'
              "
              class="level-and-gameday"
            >
              <span class="level"
                ><b>{{ game.teams.away.team.sport.name }}</b></span
              ><span class="gameday-link"
                ><a
                  href="http://milb.com/gameday/{{ game.gamePk }}"
                  target="_blank"
                  >MiLB.com Gameday</a
                ></span
              >
            </div>
            <div *ngIf="game.gameUtils.isLive" class="leverage-index">
              <div class="tooltip">
                Leverage Index:<span class="tooltiptext"
                  >A measure of how important the current plate appearance is to
                  the game's outcome. 1.0 is average, anything above 2.0 is
                  high.</span
                >
              </div>
              {{ game.leverageIndex }}
            </div>
            <div *ngIf="game.gameUtils.isLive" class="leverage-index">
              {{ game.teams.home.team.shortName }} Win Probability:
              {{ game.homeWinProb }}%
            </div>
            <div
              *ngIf="game.gameUtils.isLive && game.weather"
              class="leverage-index"
            >
              {{ game.weather }}
            </div>
          </mat-card-subtitle>
          <mat-card-content>
            <div class="card-container">
              <div class="leftside">
                <div
                  *ngIf="
                    !game.gameUtils.isLive &&
                    game.gameUtils.isFinal &&
                    !game.gameUtils.isPostponed &&
                    game.linescore.currentInning != 9
                  "
                  class="delay-flag"
                >
                  {{ game.status.detailedState }} -
                  {{ game.linescore.currentInning }} Innings
                </div>
                <div
                  *ngIf="
                    (!game.gameUtils.isLive && !game.gameUtils.isFinal) ||
                    game.linescore.currentInning == 9 ||
                    game.gameUtils.isPostponed
                  "
                  class="delay-flag"
                >
                  {{ game.status.detailedState }}
                </div>
                <div
                  *ngIf="game.doubleHeader == 'Y' || game.doubleHeader == 'S'"
                  class="doubleheader-flag"
                >
                  <span class="doubleheader-flag"
                    >DOUBLEHEADER - GAME {{ game.gameNumber }}</span
                  >
                </div>
                <div
                  *ngIf="
                    game.flags &&
                    (game.flags.perfectGame ||
                      game.flags.noHitter ||
                      game.gameUtils.isLive)
                  "
                  class="inning-div"
                >
                  <span
                    *ngIf="
                      game.flags.perfectGame !== true &&
                      game.flags.noHitter !== true
                    "
                    class="event-flag"
                  ></span>
                  <span
                    *ngIf="game.flags.perfectGame == true"
                    class="event-flag"
                    >PERFECT GAME</span
                  >
                  <span
                    *ngIf="game.flags.noHitter == true && game.flags.perfectGame !== true"
                    class="event-flag"
                    >NO-HITTER</span
                  >
                  <span *ngIf="game.gameUtils.isLive" class="inning-span"
                    >{{ game.linescore.inningState }}
                    {{ game.linescore.currentInning }}</span
                  >
                </div>
                <div *ngIf="game.linescore.teams" class="rhe-header">
                  <span class="rhe-spacer">&nbsp;</span>
                  <span class="rhe-label">R</span>
                  <span class="rhe-label">H</span>
                  <span class="rhe-label">E</span>
                </div>
                <div class="team-container">
                  <span class="team-identity">
                    <span *ngIf="game.teams.away.team.parentOrgId">
                      <img
                        class="team-logo"
                        height="20px"
                        src="https://cheese-industries.com/assets/logos/{{
                          game.teams.away.team.parentOrgId
                        }}.svg"
                      />
                    </span>
                    <span>
                      <img
                        class="team-logo"
                        height="20px"
                        src="https://cheese-industries.com/assets/logos/{{
                          game.teams.away.team.id
                        }}.svg"
                      />
                    </span>
                    <span class="team-name">
                      {{ game.teams.away.team.shortName }}
                      ({{ game.teams.away.leagueRecord.wins }}-{{
                        game.teams.away.leagueRecord.losses
                      }})
                    </span>
                    <button
                      type="button"
                      class="favorite-star-btn"
                      [class.favorite-star-active]="
                        isFavoriteTeam(game.teams.away.team.id)
                      "
                      (click)="toggleFavoriteTeam(game.teams.away.team, $event)"
                      [attr.aria-label]="
                        isFavoriteTeam(game.teams.away.team.id)
                          ? 'Remove ' + getTeamLabel(game.teams.away.team) + ' from favorites'
                          : 'Add ' + getTeamLabel(game.teams.away.team) + ' to favorites'
                      "
                      [title]="
                        isFavoriteTeam(game.teams.away.team.id)
                          ? 'Remove from favorites'
                          : 'Add to favorites'
                      "
                    >
                      {{ isFavoriteTeam(game.teams.away.team.id) ? '‚òÖ' : '‚òÜ' }}
                    </button>
                  </span>
                  <span
                    *ngIf="
                      game.linescore.teams &&
                      (game.gameUtils.isFinal ||
                        game.gameUtils.isLive ||
                        game.gameUtils.isSuspended)
                    "
                    class="team-runs"
                  >
                    {{ game.linescore.teams.away.runs }}
                  </span>
                  <span *ngIf="game.linescore.teams" class="team-hits">
                    {{ game.linescore.teams.away.hits }}
                  </span>
                  <span *ngIf="game.linescore.teams" class="team-errors">
                    {{ game.linescore.teams.away.errors }}
                  </span>
                </div>
                <div class="team-container">
                  <span class="team-identity">
                    <span *ngIf="game.teams.home.team.parentOrgId">
                      <img
                        class="team-logo"
                        height="20px"
                        src="https://cheese-industries.com/assets/logos/{{
                          game.teams.home.team.parentOrgId
                        }}.svg"
                      />
                    </span>
                    <span>
                      <img
                        class="team-logo"
                        height="20px"
                        src="https://cheese-industries.com/assets/logos/{{
                          game.teams.home.team.id
                        }}.svg"
                      />
                    </span>

                    <span class="team-name">
                      {{ game.teams.home.team.shortName }}
                      ({{ game.teams.home.leagueRecord.wins }}-{{
                        game.teams.home.leagueRecord.losses
                      }})
                    </span>
                    <button
                      type="button"
                      class="favorite-star-btn"
                      [class.favorite-star-active]="
                        isFavoriteTeam(game.teams.home.team.id)
                      "
                      (click)="toggleFavoriteTeam(game.teams.home.team, $event)"
                      [attr.aria-label]="
                        isFavoriteTeam(game.teams.home.team.id)
                          ? 'Remove ' + getTeamLabel(game.teams.home.team) + ' from favorites'
                          : 'Add ' + getTeamLabel(game.teams.home.team) + ' to favorites'
                      "
                      [title]="
                        isFavoriteTeam(game.teams.home.team.id)
                          ? 'Remove from favorites'
                          : 'Add to favorites'
                      "
                    >
                      {{ isFavoriteTeam(game.teams.home.team.id) ? '‚òÖ' : '‚òÜ' }}
                    </button>
                  </span>
                  <span
                    *ngIf="
                      game.linescore.teams &&
                      (game.gameUtils.isFinal ||
                        game.gameUtils.isLive ||
                        game.gameUtils.isSuspended)
                    "
                    class="team-runs"
                  >
                    {{ game.linescore.teams.home.runs }}
                  </span>
                  <span *ngIf="game.linescore.teams" class="team-hits">
                    {{ game.linescore.teams.home.hits }}
                  </span>
                  <span *ngIf="game.linescore.teams" class="team-errors">
                    {{ game.linescore.teams.home.errors }}
                  </span>
                </div>
                <div
                  *ngIf="
                    (game.gameDate && game.gameUtils.isPreview) ||
                    game.gameUtils.isWarmup ||
                    game.gameUtils.isPreGameDelay
                  "
                  class="game-time"
                >
                  {{ game.gameDate | date : "shortTime" }}
                </div>
                <div *ngIf="showGeoDistanceChip(game)" class="geo-distance-chip">
                  üìç {{ formatGeoDistanceMiles(game) }}
                </div>
                <div
                  *ngIf="$any(game).preGameForecast"
                  class="pregame-forecast"
                >
                  {{ $any(game).preGameForecast }}
                </div>
                <div *ngIf="game.description" class="notes">
                  <i>{{ game.description }}</i>
                </div>

                <div
                  *ngIf="
                    !game.gameUtils.isFinal &&
                    !game.gameUtils.isCancelled &&
                    !game.gameUtils.isPostponed &&
                    !game.gameUtils.isSuspended
                  "
                  class="broadcasts"
                >
                  <div class="away-broadcast">
                    {{ game.awayTVDiv }}
                  </div>
                  <div class="home-broadcast">
                    {{ game.homeTVDiv }}
                  </div>
                </div>

                <div
                  *ngIf="
                    (game.teams.away.probablePitcher ||
                      game.teams.home.probablePitcher) &&
                    (game.gameUtils.isPreview ||
                      game.gameUtils.isWarmup ||
                      game.gameUtils.isPreGameDelay)
                  "
                  class="probable-pitchers"
                >
                  <div
                    *ngIf="game.teams.away.probablePitcher"
                    class="away-probable"
                  >
                    {{ game.teams.away.team.abbreviation }}:
                    {{ game.teams.away.probablePitcher.fullName }} ({{
                      game.teams.away.probablePitcher.stats[3].stats.wins
                    }}-{{
                      game.teams.away.probablePitcher.stats[3].stats.losses
                    }},
                    {{ game.teams.away.probablePitcher.stats[3].stats.era }})
                  </div>
                  <div
                    *ngIf="game.teams.home.probablePitcher"
                    class="home-probable"
                  >
                    {{ game.teams.home.team.abbreviation }}:
                    {{ game.teams.home.probablePitcher.fullName }} ({{
                      game.teams.home.probablePitcher.stats[3].stats.wins
                    }}-{{
                      game.teams.home.probablePitcher.stats[3].stats.losses
                    }},
                    {{ game.teams.home.probablePitcher.stats[3].stats.era }})
                  </div>
                </div>

                <div
                  *ngIf="game.gameUtils.isLive"
                  class="balls-strikes-outs-inning"
                >
                  <span
                    *ngIf="game.linescore.balls || game.linescore.balls == 0"
                    class="balls"
                    >Balls: {{ game.linescore.balls }}</span
                  >
                  <span
                    *ngIf="
                      game.linescore.strikes || game.linescore.strikes == 0
                    "
                    class="strikes"
                    >Strikes: {{ game.linescore.strikes }}</span
                  >
                  <span
                    *ngIf="game.linescore.outs || game.linescore.outs == 0"
                    class="outs"
                    >Outs: {{ game.linescore.outs }}</span
                  >
                </div>

                <div
                  *ngIf="game.gameUtils.isLive && game.lastPlay"
                  class="lastPlay"
                >
                  <b>Last Play: </b>{{ game.lastPlay }}
                </div>

                <div
                  *ngIf="isCompactDensity && game.gameUtils.isLive"
                  class="compact-live-details"
                >
                  <div
                    *ngIf="game.linescore.defense.pitcher"
                    class="compact-live-row"
                  >
                    <b>Pitcher:</b>
                    {{ game.linescore.defense.pitcher.fullName }}
                    ({{ game.linescore.defense.pitcher.stats[3].stats.wins }}-{{
                      game.linescore.defense.pitcher.stats[3].stats.losses
                    }}, {{ game.linescore.defense.pitcher.stats[3].stats.era }})
                  </div>
                  <div
                    *ngIf="game.linescore.offense.batter"
                    class="compact-live-row"
                  >
                    <b>Batter:</b>
                    {{ game.linescore.offense.batter.fullName }}
                    ({{ game.linescore.offense.batter.stats[2].stats.avg }}-{{ game.linescore.offense.batter.stats[2].stats.obp }}-{{ game.linescore.offense.batter.stats[2].stats.slg }})
                  </div>
                  <div
                    *ngIf="game.linescore.offense.onDeck"
                    class="compact-live-row"
                  >
                    <b>On deck:</b>
                    {{ game.linescore.offense.onDeck.fullName }}
                  </div>
                  <div
                    *ngIf="game.linescore.offense.inHole"
                    class="compact-live-row"
                  >
                    <b>In the hole:</b>
                    {{ game.linescore.offense.inHole.fullName }}
                  </div>
                  <div class="compact-live-row compact-baserunners">
                    <b>Baserunners:</b>
                    <span
                      >1st: {{
                        game.linescore.offense.first
                          ? game.linescore.offense.first.boxscoreName
                          : '‚Äî'
                      }}</span
                    >
                    <span
                      >2nd: {{
                        game.linescore.offense.second
                          ? game.linescore.offense.second.boxscoreName
                          : '‚Äî'
                      }}</span
                    >
                    <span
                      >3rd: {{
                        game.linescore.offense.third
                          ? game.linescore.offense.third.boxscoreName
                          : '‚Äî'
                      }}</span
                    >
                  </div>
                </div>

                <div
                  *ngIf="
                    game.decisions &&
                    game.decisions.winner &&
                    game.decisions.winner.fullName
                  "
                  class="postgame-pitcher-info"
                >
                  <div
                    *ngIf="game.decisions.winner.fullName != ''"
                    class="winning-pitcher"
                  >
                    <b>W: </b>{{ game.decisions.winner.fullName }} ({{
                      game.decisions.winner.stats[3].stats.wins
                    }}-{{ game.decisions.winner.stats[3].stats.losses }},
                    {{ game.decisions.winner.stats[3].stats.era }})
                  </div>
                  <div
                    *ngIf="game.decisions.loser.fullName != ''"
                    class="losing-pitcher"
                  >
                    <b>L: </b>{{ game.decisions.loser.fullName }} ({{
                      game.decisions.loser.stats[3].stats.wins
                    }}-{{ game.decisions.loser.stats[3].stats.losses }},
                    {{ game.decisions.loser.stats[3].stats.era }})
                  </div>
                  <div
                    *ngIf="
                      game.decisions.save && game.decisions.save.fullName != ''
                    "
                    class="saving-pitcher"
                  >
                    <b>S: </b> {{ game.decisions.save.fullName }} ({{
                      game.decisions.save.stats[3].stats.wins
                    }}-{{ game.decisions.save.stats[3].stats.losses }},
                    {{ game.decisions.save.stats[3].stats.era }},
                    {{ game.decisions.save.stats[3].stats.saves }} sv)
                  </div>
                </div>
                <div
                  *ngIf="
                    !game.gameUtils.isPreview &&
                    !game.gameUtils.isWarmup &&
                    !game.gameUtils.isPreGameDelay
                  "
                  class="homeruns"
                >
                  <span *ngIf="game.homeRuns && game.homeRuns.length > 0"
                    ><b>HR: </b></span
                  >
                  <ul
                    class="homers"
                    *ngFor="let dinger of game.homeRuns; let i = index"
                  >
                    {{
                      dinger.matchup.batter.fullName
                    }}
                    {{
                      dinger.matchup.batterTeam
                    }}
                    ({{
                      dinger.homeRunNumber
                    }}) off
                    {{
                      dinger.matchup.pitcher.fullName
                    }}
                    in the
                    {{
                      dinger.matchup.ordinalInning
                    }}
                  </ul>
                  <span *ngIf="game.homeRuns && game.homeRuns.length == 0"
                    ><b>HR: </b>None
                  </span>
                </div>
              </div>
              <div class="rightside" *ngIf="game.gameUtils.isLive && !isCompactDensity">
                <span class="diamond">
                  <div class="data-inside-diamond">
                    <span *ngIf="game.linescore.defense.pitcher" class="pitcher"
                      >{{ game.linescore.defense.pitcher.fullName }} ({{
                        game.linescore.defense.pitcher.stats[3].stats.wins
                      }}-{{
                        game.linescore.defense.pitcher.stats[3].stats.losses
                      }},
                      {{
                        game.linescore.defense.pitcher.stats[3].stats.era
                      }})</span
                    >
                    <span *ngIf="game.linescore.offense.batter" class="batter"
                      >{{ game.linescore.offense.batter.fullName }} ({{
                        game.linescore.offense.batter.stats[2].stats.avg
                      }}/{{
                        game.linescore.offense.batter.stats[2].stats.obp
                      }}/{{
                        game.linescore.offense.batter.stats[2].stats.slg
                      }})</span
                    >
                    <span
                      *ngIf="game.linescore.offense.first"
                      class="runner1"
                      >{{ game.linescore.offense.first.fullName }}</span
                    >
                    <span
                      *ngIf="game.linescore.offense.second"
                      class="runner2"
                      >{{ game.linescore.offense.second.fullName }}</span
                    >
                    <span
                      *ngIf="game.linescore.offense.third"
                      class="runner3"
                      >{{ game.linescore.offense.third.fullName }}</span
                    >
                  </div>
                </span>
                <div *ngIf="game.linescore.offense.onDeck" class="ondeck">
                  <b>On Deck: </b
                  >{{ game.linescore.offense.onDeck.fullName }} ({{
                    game.linescore.offense.onDeck.stats[2].stats.avg
                  }}/{{ game.linescore.offense.onDeck.stats[2].stats.obp }}/{{
                    game.linescore.offense.onDeck.stats[2].stats.slg
                  }})
                </div>
                <div *ngIf="game.linescore.offense.inHole" class="inthehole">
                  <b>In the Hole: </b
                  >{{ game.linescore.offense.inHole.fullName }} ({{
                    game.linescore.offense.inHole.stats[2].stats.avg
                  }}/{{ game.linescore.offense.inHole.stats[2].stats.obp }}/{{
                    game.linescore.offense.inHole.stats[2].stats.slg
                  }})
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </a>
    </div>
  </div>
</ng-container>

<ng-container>
  <div
    *ngIf="everyGame"
    class="mobile-container"
    cdkDropList
    [cdkDropListData]="everyGame.dates[0].games"
    (cdkDropListDropped)="onGameCardDrop($event)"
  >
    <div
      class="mobile"
      cdkDrag
      *ngFor="let game of everyGame.dates[0].games; let i = index"
    >
      <div class="mobile-card-reorder-controls" (click)="$event.stopPropagation()">
        <button
          type="button"
          class="reorder-btn drag-handle"
          cdkDragHandle
          title="Drag to reorder"
          aria-label="Drag to reorder card"
        >
          <span class="drag-dots" aria-hidden="true">‚ãÆ‚ãÆ</span>
          <span class="drag-label">Drag</span>
        </button>
        <button
          type="button"
          class="reorder-btn"
          (click)="moveGameCard(i, -1, $event)"
          [disabled]="!canMoveGameCard(i, -1)"
          title="Move card up"
          aria-label="Move card up"
        >
          ‚Üë
        </button>
        <button
          type="button"
          class="reorder-btn"
          (click)="moveGameCard(i, 1, $event)"
          [disabled]="!canMoveGameCard(i, 1)"
          title="Move card down"
          aria-label="Move card down"
        >
          ‚Üì
        </button>
      </div>
      <a
        class="no-text-decoration"
        [routerLink]="['/boxscore', game.gamePk]"
        href=""
        target="_blank"
      >
        <mat-card class="mobile-mat-card game-card mobile-game-card">
        <mat-card-content>
          <div class="mobile-card-container">
            <div class="mobile-team-line">
              <div class="mobile-team-name">                  <span *ngIf="game.teams.away.team.parentOrgId">
                <img
                  class="team-logo"
                  height="20px"
                  src="https://cheese-industries.com/assets/logos/{{
                    game.teams.away.team.parentOrgId
                  }}.svg"
                />
              </span>
              <span>
                <img
                  class="team-logo"
                  height="20px"
                  src="https://cheese-industries.com/assets/logos/{{
                    game.teams.away.team.id
                  }}.svg"
                />
              </span>
{{game.teams.away.team.abbreviation}}
              <button
                type="button"
                class="favorite-star-btn mobile-favorite-star"
                [class.favorite-star-active]="
                  isFavoriteTeam(game.teams.away.team.id)
                "
                (click)="toggleFavoriteTeam(game.teams.away.team, $event)"
                [attr.aria-label]="
                  isFavoriteTeam(game.teams.away.team.id)
                    ? 'Remove ' + getTeamLabel(game.teams.away.team) + ' from favorites'
                    : 'Add ' + getTeamLabel(game.teams.away.team) + ' to favorites'
                "
                [title]="
                  isFavoriteTeam(game.teams.away.team.id)
                    ? 'Remove from favorites'
                    : 'Add to favorites'
                "
              >
                {{ isFavoriteTeam(game.teams.away.team.id) ? '‚òÖ' : '‚òÜ' }}
              </button></div>
              <div *ngIf="!game.gameUtils.isPreview && !game.gameUtils.isWarmup && game.linescore?.teams?.away" class="mobile-rhe">{{game.linescore.teams.away.runs}}</div>
              <div *ngIf="!game.gameUtils.isPreview && !game.gameUtils.isWarmup && game.linescore?.teams?.away" class="mobile-rhe">{{game.linescore.teams.away.hits}}</div>
              <div *ngIf="!game.gameUtils.isPreview && !game.gameUtils.isWarmup && game.linescore?.teams?.away" class="mobile-rhe">{{game.linescore.teams.away.errors}}</div>
            </div>
            <div *ngIf="game.teams.away.team.sport.name !== 'Major League Baseball'"class="mobile-level">{{game.teams.away.team.sport.name}}</div>
            <div *ngIf="game.teams.away.team.sport.name === 'Major League Baseball'"class="mobile-level">MLB</div>
            <div class="mobile-team-line">
              <div class="mobile-team-name">                  <span *ngIf="game.teams.home.team.parentOrgId">
                <img
                  class="team-logo"
                  height="20px"
                  src="https://cheese-industries.com/assets/logos/{{
                    game.teams.home.team.parentOrgId
                  }}.svg"
                />
              </span>
              <span>
                <img
                  class="team-logo"
                  height="20px"
                  src="https://cheese-industries.com/assets/logos/{{
                    game.teams.home.team.id
                  }}.svg"
                />
              </span>
{{game.teams.home.team.abbreviation}}
              <button
                type="button"
                class="favorite-star-btn mobile-favorite-star"
                [class.favorite-star-active]="
                  isFavoriteTeam(game.teams.home.team.id)
                "
                (click)="toggleFavoriteTeam(game.teams.home.team, $event)"
                [attr.aria-label]="
                  isFavoriteTeam(game.teams.home.team.id)
                    ? 'Remove ' + getTeamLabel(game.teams.home.team) + ' from favorites'
                    : 'Add ' + getTeamLabel(game.teams.home.team) + ' to favorites'
                "
                [title]="
                  isFavoriteTeam(game.teams.home.team.id)
                    ? 'Remove from favorites'
                    : 'Add to favorites'
                "
              >
                {{ isFavoriteTeam(game.teams.home.team.id) ? '‚òÖ' : '‚òÜ' }}
              </button></div>
              <div *ngIf="!game.gameUtils.isPreview && !game.gameUtils.isWarmup && game.linescore?.teams?.home" class="mobile-rhe">{{game.linescore.teams.home.runs}}</div>
              <div *ngIf="!game.gameUtils.isPreview && !game.gameUtils.isWarmup && game.linescore?.teams?.home" class="mobile-rhe">{{game.linescore.teams.home.hits}}</div>
              <div *ngIf="!game.gameUtils.isPreview && !game.gameUtils.isWarmup && game.linescore?.teams?.home" class="mobile-rhe">{{game.linescore.teams.home.errors}}</div>
            </div>
            <div *ngIf="game.gameUtils.isLive && !game.gameUtils.isWarmup" class="mobile-inning">
                {{game.linescore.inningState}} {{game.linescore.currentInningOrdinal}}&nbsp;&nbsp;&nbsp;<span *ngIf="game.linescore">Balls: {{game.linescore.balls}}</span>&nbsp;&nbsp;&nbsp;<span *ngIf="game.linescore">Strikes: {{game.linescore.strikes}}</span>&nbsp;&nbsp;&nbsp; <span *ngIf="game.linescore">Outs: {{game.linescore.outs}}</span>
            </div>
            <div *ngIf="(game.gameUtils.isPreview || game.gameUtils.isWarmup)" class="mobile-start-time">
              {{ game.gameDate | date : "shortTime" }}
            </div>
            <div *ngIf="showGeoDistanceChip(game)" class="mobile-geo-distance-chip">
              üìç {{ formatGeoDistanceMiles(game) }}
            </div>
            <div *ngIf="$any(game).preGameForecast" class="mobile-pregame-forecast">
              {{ $any(game).preGameForecast }}
            </div>
            <div *ngIf="!game.gameUtils.isLive && !game.gameUtils.isPreview && !game.gameUtils.isWarmup && !game.gameUtils.isPostponed && !game.gameUtils.isCancelled" class="mobile-final">
                <b>Final</b>
            </div>
            <div *ngIf="game.gameUtils.isCancelled" class="mobile-final">
                <b>Cancelled<span *ngIf="game.status.reason"> - {{game.status.reason}}</span></b>
            </div>
            <div *ngIf="game.gameUtils.isPostponed" class="mobile-final">
                <b>Postponed<span *ngIf="game.status.reason"> - {{game.status.reason}}</span></b>
            </div>
            <div *ngIf="game.gameUtils.isLive && !game.gameUtils.isWarmup && game.linescore.offense.batter" class="mobile-batter">
                Batter: {{ game.linescore.offense.batter.fullName }} ({{
                    game.linescore.offense.batter.stats[2].stats.avg
                  }}/{{
                    game.linescore.offense.batter.stats[2].stats.obp
                  }}/{{
                    game.linescore.offense.batter.stats[2].stats.slg
                  }})
            </div>
            <div *ngIf="game.gameUtils.isLive && !game.gameUtils.isWarmup && game.linescore.defense.pitcher" class="mobile-pitcher">
                Pitcher: {{ game.linescore.defense.pitcher.fullName }} ({{
                    game.linescore.defense.pitcher.stats[3].stats.wins
                  }}-{{
                    game.linescore.defense.pitcher.stats[3].stats.losses
                  }},
                  {{
                    game.linescore.defense.pitcher.stats[3].stats.era
                  }})
            </div>
            <div *ngIf="game.gameUtils.isPreview || game.gameUtils.isWarmup" class="mobile-away-probable-pitcher">
              {{ game.teams.away.team.abbreviation }}: <span *ngIf="game.teams.away.probablePitcher">
              {{ game.teams.away.probablePitcher.fullName }} ({{
                game.teams.away.probablePitcher.stats[3].stats.wins
              }}-{{
                game.teams.away.probablePitcher.stats[3].stats.losses
              }},
              {{ game.teams.away.probablePitcher.stats[3].stats.era }})
              </span>
              <span *ngIf="!game.teams.away.probablePitcher">
                TBA
              </span>
            </div>
            <div *ngIf="game.gameUtils.isPreview || game.gameUtils.isWarmup" class="mobile-home-probable-pitcher">
              {{ game.teams.home.team.abbreviation }}: <span *ngIf="game.teams.home.probablePitcher">
              {{ game.teams.home.probablePitcher.fullName }} ({{
                game.teams.home.probablePitcher.stats[3].stats.wins
              }}-{{
                game.teams.home.probablePitcher.stats[3].stats.losses
              }},
              {{ game.teams.home.probablePitcher.stats[3].stats.era }})
              </span>
              <span *ngIf="!game.teams.home.probablePitcher">
                TBA
              </span>
            </div>
            <div *ngIf="game.decisions?.winner" class="mobile-win-pitcher">
              <b>W: </b>{{ game.decisions.winner.fullName }} ({{
                game.decisions.winner.stats[3].stats.wins
              }}-{{ game.decisions.winner.stats[3].stats.losses }},
              {{ game.decisions.winner.stats[3].stats.era }})
            </div>
            <div *ngIf="game.decisions?.loser" class="mobile-decision-pitcher">
              <b>L: </b>{{ game.decisions.loser.fullName }} ({{
                game.decisions.loser.stats[3].stats.wins
              }}-{{ game.decisions.loser.stats[3].stats.losses }},
              {{ game.decisions.loser.stats[3].stats.era }})
            </div>
            <div *ngIf="game.decisions?.save" class="mobile-decision-pitcher">
              <b>S: </b> {{ game.decisions.save.fullName }} ({{
                game.decisions.save.stats[3].stats.wins
              }}-{{ game.decisions.save.stats[3].stats.losses }},
              {{ game.decisions.save.stats[3].stats.era }},
              {{ game.decisions.save.stats[3].stats.saves }} sv)
      </div>
            <div *ngIf="game.gameUtils.isPreview || game.gameUtils.isWarmup || game.gameUtils.isLive" class="mobile-broadcaster">
                {{ game.awayTVDiv }}
            </div>
            <div *ngIf="game.gameUtils.isPreview || game.gameUtils.isWarmup || game.gameUtils.isLive" class="mobile-broadcaster">
                {{ game.homeTVDiv }}
            </div>
            <div *ngIf="game.gameUtils.isLive && !game.gameUtils.isWarmup" class="mobile-baserunners">
              <div class="mobile-runner"><b>Baserunners</b></div>
                <div class="mobile-runner"><b>1st: </b><span *ngIf="game.linescore.offense.first">{{game.linescore.offense.first.boxscoreName}}</span></div>
                <div class="mobile-runner"><b>2nd: </b><span *ngIf="game.linescore.offense.second">{{game.linescore.offense.second.boxscoreName}}</span></div>
                <div class="mobile-runner"><b>3rd: </b><span *ngIf="game.linescore.offense.third">{{game.linescore.offense.third.boxscoreName}}</span></div>
            </div>
            <div *ngIf="game.gameUtils.isLive && !game.gameUtils.isWarmup" class="mobile-in-progress-home-runs">
                <b>HR: </b>{{game.mobileHomeRunList}}
            </div>
            <div *ngIf="game.gameUtils.isGameOver || game.gameUtils.isFinal" class="mobile-game-over-home-runs">
              <b>HR: </b>{{game.mobileHomeRunList}}
            </div>
          </div>
        </mat-card-content>
      </mat-card>
      </a>
    </div>
  </div>
</ng-container>

<div
  class="pitching-alert-overlay"
  *ngIf="activePitchingFeatAlert as alert"
  (click)="dismissPitchingFeatAlert()"
>
  <div
    class="pitching-alert-modal"
    role="dialog"
    aria-modal="true"
    [attr.aria-label]="alert.title"
    (click)="$event.stopPropagation()"
  >
    <h3>{{ alert.title }}</h3>
    <p>{{ alert.message }}</p>
    <button type="button" class="pitching-alert-close" (click)="dismissPitchingFeatAlert()">
      Got it
    </button>
  </div>
</div>

</div>
